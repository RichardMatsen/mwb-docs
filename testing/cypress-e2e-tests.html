<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Cypress e2e testing | MWB Documentation</title>
    <meta name="description" content="Data migration workbench">
    
    
    <link rel="preload" href="/mwb-docs/assets/css/0.styles.f856d471.css" as="style"><link rel="preload" href="/mwb-docs/assets/js/app.a7583053.js" as="script"><link rel="preload" href="/mwb-docs/assets/js/28.f7daa03e.js" as="script"><link rel="preload" href="/mwb-docs/assets/js/7.8a1efbd8.js" as="script"><link rel="prefetch" href="/mwb-docs/assets/js/14.63eaeec2.js"><link rel="prefetch" href="/mwb-docs/assets/js/2.cd3fbe18.js"><link rel="prefetch" href="/mwb-docs/assets/js/3.e5d6ffde.js"><link rel="prefetch" href="/mwb-docs/assets/js/4.5aee960d.js"><link rel="prefetch" href="/mwb-docs/assets/js/5.31efbd1b.js"><link rel="prefetch" href="/mwb-docs/assets/js/6.a75e5a13.js"><link rel="prefetch" href="/mwb-docs/assets/js/8.43eff26f.js"><link rel="prefetch" href="/mwb-docs/assets/js/9.4257e60b.js"><link rel="prefetch" href="/mwb-docs/assets/js/10.b23970bc.js"><link rel="prefetch" href="/mwb-docs/assets/js/11.21e89f2a.js"><link rel="prefetch" href="/mwb-docs/assets/js/12.c9ded795.js"><link rel="prefetch" href="/mwb-docs/assets/js/13.7569e760.js"><link rel="prefetch" href="/mwb-docs/assets/js/15.15d8439f.js"><link rel="prefetch" href="/mwb-docs/assets/js/16.003eec02.js"><link rel="prefetch" href="/mwb-docs/assets/js/17.d272c3f2.js"><link rel="prefetch" href="/mwb-docs/assets/js/18.28d2d373.js"><link rel="prefetch" href="/mwb-docs/assets/js/19.6f14f780.js"><link rel="prefetch" href="/mwb-docs/assets/js/20.5a0ab772.js"><link rel="prefetch" href="/mwb-docs/assets/js/21.6c516c23.js"><link rel="prefetch" href="/mwb-docs/assets/js/22.eb780789.js"><link rel="prefetch" href="/mwb-docs/assets/js/23.d60688de.js"><link rel="prefetch" href="/mwb-docs/assets/js/24.e0c7f95f.js"><link rel="prefetch" href="/mwb-docs/assets/js/25.a03bcc83.js"><link rel="prefetch" href="/mwb-docs/assets/js/26.e7229fbe.js"><link rel="prefetch" href="/mwb-docs/assets/js/27.5b7facd5.js"><link rel="prefetch" href="/mwb-docs/assets/js/29.fa78f538.js"><link rel="prefetch" href="/mwb-docs/assets/js/30.6e46af23.js"><link rel="prefetch" href="/mwb-docs/assets/js/31.9c9aa942.js"><link rel="prefetch" href="/mwb-docs/assets/js/32.2dc8a33b.js"><link rel="prefetch" href="/mwb-docs/assets/js/33.4f0214a4.js"><link rel="prefetch" href="/mwb-docs/assets/js/34.bcdd55ce.js"><link rel="prefetch" href="/mwb-docs/assets/js/35.08bcc98d.js"><link rel="prefetch" href="/mwb-docs/assets/js/36.39c27025.js"><link rel="prefetch" href="/mwb-docs/assets/js/37.2bb75089.js"><link rel="prefetch" href="/mwb-docs/assets/js/38.30e861d1.js">
    <link rel="stylesheet" href="/mwb-docs/assets/css/0.styles.f856d471.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/mwb-docs/" class="home-link router-link-active"><!----> <span class="site-name">MWB Documentation</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/mwb-docs/" class="nav-link">Overview</a></div><div class="nav-item"><a href="/mwb-docs/measure-calculation/" class="nav-link">Measure Calculation</a></div><div class="nav-item"><a href="/mwb-docs/dashboard-thumbnail/" class="nav-link">DashboardThumbnail</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Redux Store</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mwb-docs/redux/redux-store.html" class="nav-link">Overview</a></li><li class="dropdown-item"><!----> <a href="/mwb-docs/redux/redux-middleware.html" class="nav-link">Middleware</a></li><li class="dropdown-item"><!----> <a href="/mwb-docs/redux/redux-selector-helpers.html" class="nav-link">Selector Helpers</a></li><li class="dropdown-item"><!----> <a href="/mwb-docs/redux/redux-computed-state.html" class="nav-link">Computed State</a></li><li class="dropdown-item"><!----> <a href="/mwb-docs/redux/redux-observable-arrays.html" class="nav-link">Observable Arrays</a></li><li class="dropdown-item"><!----> <a href="/mwb-docs/redux/redux-reducer-testing.html" class="nav-link">Reducer Testing</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Testing</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mwb-docs/testing/cypress-e2e-tests.html" class="nav-link router-link-exact-active router-link-active">Cypress e2e Testing</a></li><li class="dropdown-item"><!----> <a href="/mwb-docs/testing/cypress-test-results.html" class="nav-link">Cypress Test Results</a></li><li class="dropdown-item"><!----> <a href="/mwb-docs/testing/unit-test-results.html" class="nav-link">Unit Tests</a></li><li class="dropdown-item"><!----> <a href="/mwb-docs/testing/code-coverage.html" class="nav-link">Code Coverage</a></li><li class="dropdown-item"><!----> <a href="/mwb-docs/testing/webpack-bundle-analyzer-results.html" class="nav-link">Webpack Bundle Analyzer</a></li><li class="dropdown-item"><!----> <a href="/mwb-docs/testing/npm-audit.html" class="nav-link">npm audit security report</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/RichardMatsen/mwb-v2-redux" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/mwb-docs/" class="nav-link">Overview</a></div><div class="nav-item"><a href="/mwb-docs/measure-calculation/" class="nav-link">Measure Calculation</a></div><div class="nav-item"><a href="/mwb-docs/dashboard-thumbnail/" class="nav-link">DashboardThumbnail</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Redux Store</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mwb-docs/redux/redux-store.html" class="nav-link">Overview</a></li><li class="dropdown-item"><!----> <a href="/mwb-docs/redux/redux-middleware.html" class="nav-link">Middleware</a></li><li class="dropdown-item"><!----> <a href="/mwb-docs/redux/redux-selector-helpers.html" class="nav-link">Selector Helpers</a></li><li class="dropdown-item"><!----> <a href="/mwb-docs/redux/redux-computed-state.html" class="nav-link">Computed State</a></li><li class="dropdown-item"><!----> <a href="/mwb-docs/redux/redux-observable-arrays.html" class="nav-link">Observable Arrays</a></li><li class="dropdown-item"><!----> <a href="/mwb-docs/redux/redux-reducer-testing.html" class="nav-link">Reducer Testing</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Testing</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mwb-docs/testing/cypress-e2e-tests.html" class="nav-link router-link-exact-active router-link-active">Cypress e2e Testing</a></li><li class="dropdown-item"><!----> <a href="/mwb-docs/testing/cypress-test-results.html" class="nav-link">Cypress Test Results</a></li><li class="dropdown-item"><!----> <a href="/mwb-docs/testing/unit-test-results.html" class="nav-link">Unit Tests</a></li><li class="dropdown-item"><!----> <a href="/mwb-docs/testing/code-coverage.html" class="nav-link">Code Coverage</a></li><li class="dropdown-item"><!----> <a href="/mwb-docs/testing/webpack-bundle-analyzer-results.html" class="nav-link">Webpack Bundle Analyzer</a></li><li class="dropdown-item"><!----> <a href="/mwb-docs/testing/npm-audit.html" class="nav-link">npm audit security report</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/RichardMatsen/mwb-v2-redux" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Cypress e2e testing</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/mwb-docs/testing/cypress-e2e-tests.html#why-cypress" class="sidebar-link">Why Cypress</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/mwb-docs/testing/cypress-e2e-tests.html#waiting-for-the-page" class="sidebar-link">Waiting for the page</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mwb-docs/testing/cypress-e2e-tests.html#the-problem-with-waiting" class="sidebar-link">The problem with waiting</a></li><li class="sidebar-sub-header"><a href="/mwb-docs/testing/cypress-e2e-tests.html#retry-until-success" class="sidebar-link">Retry until success</a></li></ul></li><li><a href="/mwb-docs/testing/cypress-e2e-tests.html#test-suite-structure" class="sidebar-link">Test suite structure</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mwb-docs/testing/cypress-e2e-tests.html#static-tests" class="sidebar-link">Static tests</a></li><li class="sidebar-sub-header"><a href="/mwb-docs/testing/cypress-e2e-tests.html#layout-tests" class="sidebar-link">Layout tests</a></li><li class="sidebar-sub-header"><a href="/mwb-docs/testing/cypress-e2e-tests.html#action-tests" class="sidebar-link">Action tests</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="cypress-e2e-testing"><a href="#cypress-e2e-testing" aria-hidden="true" class="header-anchor">#</a> Cypress e2e testing</h1> <p>The Cypress testing framework is more user friendly than the Protractor/Karma/Selenium tools provided with Angular.</p> <img src="/mwb-docs/assets/img/CypressDashboardTest.9c492d60.jpg" alt="Cypress testing"> <h2 id="why-cypress"><a href="#why-cypress" aria-hidden="true" class="header-anchor">#</a> Why Cypress</h2> <ul><li>Features assisting failure correction
<ul><li>Gui-based, easier to read and track error messages</li> <li>Error information expands into chrome dev console on click</li> <li>Steps (commands) within tests are enumerated, makes point of failure more obvious</li></ul></li> <li>Commands = implicit assertions + retry
<ul><li>Selector commands contain built-in assertions</li> <li>Saves boiler-plate expects</li> <li>Auto-retry of commands until success or timeout</li></ul></li> <li>Observe test execution
<ul><li>Real-time view of tested page with highlight of selected elements</li> <li>Snapshot of page at each command, allows time-travel review of page at each step</li> <li>Before and after snapshots on user actions (e.g clicks)</li></ul></li> <li>Async commands wait (mostly) for the page to settle</li> <li>Wide range of built-in commands</li> <li>Easily implement user-defined commands and test helpers</li></ul> <h2 id="waiting-for-the-page"><a href="#waiting-for-the-page" aria-hidden="true" class="header-anchor">#</a> Waiting for the page</h2> <h3 id="the-problem-with-waiting"><a href="#the-problem-with-waiting" aria-hidden="true" class="header-anchor">#</a> The problem with waiting</h3> <p>If a web page fetches data asynchronously, a delay will occur before complete rendering. In a Selenium e2e test, we add a wait to handle this.<br>
However the load time can vary depending on workstation and network load, so a maximum wait period needs to be set - but even then a test can exceed this period, and the test sporadically fails.</p> <h3 id="retry-until-success"><a href="#retry-until-success" aria-hidden="true" class="header-anchor">#</a> Retry until success</h3> <p>Cypress commands have a built-in retry mechanism. This pattern of waiting is better than an explicit wait period, as it will succeed as soon as the fetch completes. As long as the timeout is sufficiently long (default is 5s) tests should not sporadically fail due to loading.</p> <p>The key to implementing this type of page load is to pick a 'canary' element, one that has it's content set last and test for that particular content, e.g below we wait for the page to contain the text <strong>'99.53%'</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">load_page</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  cy<span class="token punctuation">.</span><span class="token function">viewport</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token operator">/</span><span class="token number">1.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">2000</span><span class="token operator">/</span><span class="token number">1.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  cy<span class="token punctuation">.</span><span class="token function">visit</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
  <span class="token comment">// wait for the last metric to get calculated text</span>
  cy<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'99.53%'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>timeout<span class="token punctuation">:</span> <span class="token number">10000</span><span class="token punctuation">}</span><span class="token punctuation">)</span>  
<span class="token punctuation">}</span>
</code></pre></div><h2 id="test-suite-structure"><a href="#test-suite-structure" aria-hidden="true" class="header-anchor">#</a> Test suite structure</h2> <p>A page is tested in three sections - Static, Layout, and Actions.</p> <h3 id="static-tests"><a href="#static-tests" aria-hidden="true" class="header-anchor">#</a> Static tests</h3> <p>These tests check the static look of the page after it first loads, i.e which elements are present, what are their attributes.</p> <p>They do not change the view, so only one page load (implemented in a <code>before()</code> command) is required for all of them, allowing these tests to proceed much faster.</p> <p>Depending on the nature of the page, this can be the bulk of the tests.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Dashboard Page'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  <span class="token function">before</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    cy<span class="token punctuation">.</span><span class="token function">visit</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
    cy<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'99.53%'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>timeout<span class="token punctuation">:</span> <span class="token number">10000</span><span class="token punctuation">}</span><span class="token punctuation">)</span>  
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'static features'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'Dashboard'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should display Dashboard title'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        cy<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'.dashboard&gt;h1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'contain'</span><span class="token punctuation">,</span> <span class="token string">'Dashboard'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token operator">...</span>
</code></pre></div><h3 id="layout-tests"><a href="#layout-tests" aria-hidden="true" class="header-anchor">#</a> Layout tests</h3> <p>Layout tests attempt to do in code what the eye does automatically - check the element layout looks correct.</p> <p>These tests generally do not use exact measurements, as this would make the brittle. Instead it uses higher-order concepts such as element ordering, alignment, and justification.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'layout'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  <span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    cy<span class="token punctuation">.</span><span class="token function">viewport</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token operator">/</span><span class="token number">1.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">2000</span><span class="token operator">/</span><span class="token number">1.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Thumbnail content'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    <span class="token keyword">const</span> selectors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'.measure-icon'</span><span class="token punctuation">,</span><span class="token string">'.title'</span><span class="token punctuation">,</span> <span class="token string">'.filler'</span><span class="token punctuation">,</span> <span class="token string">'sparkline'</span><span class="token punctuation">,</span> <span class="token string">'.badge'</span><span class="token punctuation">]</span>

    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should display thumbnail contents in order'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      cy<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'.thumbnail'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>el <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        cy<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">selectorsAreOrdered</span><span class="token punctuation">(</span>selectors<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should vertically align to center the thumbnail contents'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      cy<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'.thumbnail'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>el <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        cy<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>selectors<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">', '</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>children <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> sortedSelectors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>children<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>el <span class="token operator">=&gt;</span> <span class="token function">getSelector</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> selectors<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">const</span> vcs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>children<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>child <span class="token operator">=&gt;</span> <span class="token function">elementVerticalCenter</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">areAligned</span><span class="token punctuation">(</span>vcs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token boolean">true</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="action-tests"><a href="#action-tests" aria-hidden="true" class="header-anchor">#</a> Action tests</h3> <p>These test user actions on the page, e.g clicks, selects, inputs. They will require a fresh page load between tests, so run slower than the static tests. (Note the <code>cy.wait()</code> does not have to be as long as the initial page load, since the files have not changed and fetch will return a network status of 304 - Not modified).</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'actions'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'thumbnail navigation'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    <span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      cy<span class="token punctuation">.</span><span class="token function">visit</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
      cy<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'99.53%'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>timeout<span class="token punctuation">:</span> <span class="token number">10000</span><span class="token punctuation">}</span><span class="token punctuation">)</span>  
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token punctuation">[</span><span class="token string">'validations'</span><span class="token punctuation">,</span> <span class="token string">'referentials'</span><span class="token punctuation">,</span> <span class="token string">'clinics'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

      <span class="token function">it</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`should navigate to '</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>page<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">'`</span></span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        cy<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'.thumbnail a.measure'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        cy<span class="token punctuation">.</span><span class="token function">location</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token punctuation">(</span>loc<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">expect</span><span class="token punctuation">(</span>loc<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`http://localhost:4200/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>page<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="minimap-container" style="width:250px;" data-v-5f41ee3b><div class="minimap" style="top:250px;zoom:25%;" data-v-5f41ee3b><div data-v-5f41ee3b></div></div></div></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">9/3/2018, 8:47:06 PM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/mwb-docs/assets/js/28.f7daa03e.js" defer></script><script src="/mwb-docs/assets/js/7.8a1efbd8.js" defer></script><script src="/mwb-docs/assets/js/app.a7583053.js" defer></script>
  </body>
</html>
