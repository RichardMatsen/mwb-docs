(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{288:function(e,t,o){"use strict";o.r(t);var s=o(1),i=Object(s.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"content"},[o("h2",{attrs:{id:"searchcomponent-testing-notes"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#searchcomponent-testing-notes","aria-hidden":"true"}},[e._v("#")]),e._v(" SearchComponent Testing Notes")]),e._v(" "),o("ol",[o("li",[e._v("Uses Location.path to determine which page is active, and decide if it's searchable (not strictly necessary after move of the search control from the nav-bar to the common page component)"),o("br"),e._v("\nNeed to use SpyLocation to mock Location.")])]),e._v(" "),o("ul",[o("li",[e._v("Can't use a standard jasmine mockLocation (component will not compile).")]),e._v(" "),o("li",[e._v("Note, jasmine mock is sufficient for similar tests on a service")]),e._v(" "),o("li",[e._v("use a simple constructor call to new-up a service:")]),e._v(" "),o("li",[e._v("searchService = new SearchService(mockLocation, mockNgReduxDispatcher, mockActions);")])]),e._v(" "),o("p",[e._v("Info on SpyLocation:")]),e._v(" "),o("ul",[o("li",[e._v("Angular docs page for SpyLocation is missing")]),e._v(" "),o("li",[e._v("the library for Spylocation is reported in various places over time")]),e._v(" "),o("li",[e._v('currently (June 2017) is: import { SpyLocation } from "@angular/common/testing";')])]),e._v(" "),o("p",[e._v("Set up SpyLocation:")]),e._v(" "),o("ul",[o("li",[e._v("in TestBed.configureTestingModule:\n"),o("ul",[o("li",[e._v("providers: [{provide: Location, useClass: SpyLocation}],")])])]),e._v(" "),o("li",[e._v("get a reference to it:\n"),o("ul",[o("li",[e._v("location = TestBed.get(Location);")])])]),e._v(" "),o("li",[e._v("Router and routes not needed for this test")]),e._v(" "),o("li",[e._v("To mock Location.path(), use:\n"),o("ul",[o("li",[e._v("location.go('notSearchablePage')")])])])]),e._v(" "),o("ol",{attrs:{start:"2"}},[o("li",[o("p",[e._v("Refactor the component to make use of NgRedux/store more granular.\nThis makes testing easier, as internal steps can be simply tested by expecting calls on mockActions.")])]),e._v(" "),o("li",[o("p",[e._v("Use NgRedux test helpers to set up the store:\nMockNgRedux.reset();\nsetupMockStore(['search'], { page: 'validations', searchTerm: 'test', results: [] })\nsetupMockStore(['pages', 'validations', 'visibleFiles'], testFiles)\nlogMockStore();  // Debugging: Check what is in the store")])])])])}],!1,null,null,null);i.options.__file="search.component-tests.md";t.default=i.exports}}]);